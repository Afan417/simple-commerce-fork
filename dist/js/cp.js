!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";r.r(e);var n=function(t,e,r,n,o,s,i,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}({props:{model:String,cols:String,items:String},data:function(){return{rows:JSON.parse(this.items),columns:JSON.parse(this.cols),search:"",sortColumn:"title",sortDirection:"asc",requestUrl:cp_url(this.model+"/search")}},methods:{redirect:function(t){location.href=t},actionStarted:function(){},actionCompleted:function(){},sorted:function(t,e){this.sortColumn=t,this.sortDirection=e},request:function(){var t=this;this.source&&this.source.cancel(),this.source=this.$axios.CancelToken.source(),this.$axios.get(this.requestUrl,{params:this.parameters,cancelToken:this.source.token}).then((function(e){t.sortColumn=e.data.meta.sortColumn,t.rows=e.data.data,t.meta=e.data.meta})).catch((function(e){t.$axios.isCancel(e)||t.$toast.error(e.response?e.response.data.message:__("Something went wrong"),{duration:null})}))}},computed:{parameters:function(){return Object.assign({search:this.search},this.additionalParameters)}},watch:{parameters:{deep:!0,handler:function(t,e){e.search===t.search&&JSON.stringify(e)!==JSON.stringify(t)&&this.request()}},search:function(t){this.sortColumn=null,this.sortDirection=null,this.request()}}},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("data-list",{attrs:{rows:t.rows,columns:t.columns,search:!1,"search-query":t.search,sort:!1,"sort-colunm":t.sortColumn,"sort-direction":t.sortDirection},scopedSlots:t._u([{key:"default",fn:function(e){e.hasSelections;return r("div",{},[r("div",{staticClass:"card p-0"},[r("div",{staticClass:"data-list-header min-h-16"},[r("data-list-search",{model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),0===t.rows.length?r("div",{staticClass:"p-3 text-center text-grey-50",domProps:{textContent:t._s(t.__("No results"))}}):r("data-list-table",{on:{sorted:t.sorted},scopedSlots:t._u([{key:"cell-title",fn:function(e){var n=e.row;return[r("div",{staticClass:"flex items-center"},[r("div",{staticClass:"little-dot mr-1",class:[n.enabled?"bg-green":"bg-grey-40"]}),t._v(" "),r("a",{on:{click:function(e){return e.stopPropagation(),t.redirect(n.edit_url)}}},[t._v(t._s(n.title))])])]}},{key:"cell-slug",fn:function(e){var n=e.row;return[r("span",{staticClass:"font-mono text-2xs"},[t._v(t._s(n.slug))])]}},{key:"actions",fn:function(e){var n=e.row;e.index;return[r("dropdown-list",[r("dropdown-item",{attrs:{text:t.__("Edit"),redirect:n.edit_url}}),t._v(" "),r("dropdown-item",{attrs:{text:t.__("Delete"),redirect:n.delete_url}})],1)]}}],null,!0)})],1)])}}])})],1)}),[],!1,null,null,null).exports;Statamic.$components.register("commerce-listing",n)}]);